<div class="container pdd-x-2 pdd-y-2 gap-3" *ngIf="node">
  <app-head class="title-container" title="{{ node.label }}"
    subtitle="{{nodeType=='root'? `Nodo Raiz`: `Nivel : ${node.level}`}}"></app-head>
  <div class="modulo">
    <div class="body-modulo">
      <div class="segment-section">
        <ion-segment class="segment expand-full" [scrollable]="true" [swipe-gesture]="true" value="default">
            <ion-segment-button value="default" content-id="nodes-content">
            <ion-label>Nodos ({{children?.length && children!.length > 0 ? children?.length: '0' }})</ion-label>
          </ion-segment-button>
          <ion-segment-button  content-id="settings-content">
            <ion-label>Configuración</ion-label>
          </ion-segment-button>
          <ion-segment-button content-id="info-content">
            <ion-label>Información</ion-label>
          </ion-segment-button>
        </ion-segment>
      </div>
      <div class="segment-content">
        <ion-segment-view>
          <ion-segment-content id="nodes-content">
            <!-- #region - Child Nodes-->
            <div class="modulo" *ngIf="children">
              <div class="body-modulo">

                <ion-list lines="none">
                  @for(child of children; track child.value._id){
                  <ion-item (click)="
                        onNavigation({
                          componentID: 'nodeManager',
                          categoryData: child.value
                        })
                      " button>
                    <ion-icon class="icon-primary" aria-hidden="true" name="git-commit-outline" slot="start"></ion-icon>
                    <ion-label>
                      <h3>{{ child?.value.label }}</h3>
                      <p>
                        Nivel: {{ child?.value.level }}
                      </p>
                    </ion-label>
                    <ion-button class="bt-icon size-m fill-clear">
                      <ion-icon name="chevron-forward-outline"></ion-icon>
                    </ion-button>
                  </ion-item>
                  }
                </ion-list>
                <div class="buttons-section-common button-inline-end">
                  <ion-button class="bt-io size-m txt-sz-m expand-content custom-button-primary"
                    (click)="onNavigation({ componentID: 'createNode', categoryData: node })">Crear Nodo</ion-button>
                </div>
              </div>
            </div>
            <!-- #endregion -->
          </ion-segment-content>
          <ion-segment-content id="settings-content">
            <!-- #region - Box Main-->
            <div class="modulo">
              <div class="body-modulo custom-margin-bottom">
                <div class="box-overview-component">
                  <ion-icon name="compass-outline"></ion-icon>
                  <span class="text-main">{{ node.label }}</span>
                  <span class="text-secondary">
                    {{ node.description }}
                  </span>
                  <div class="buttons-section-common button-inline custom-button-secondary">
                    <ion-button class="bt-io txt-sz-m custom-button-primary" (click)="
                        onNavigation({ componentID: 'createNode', categoryData: node })
                      ">Crear Nodo</ion-button>
                    <ion-button class="bt-io txt-sz-m custom-button-secondary"
                      (click)="onNavigation({ componentID: 'editNode' })">Editar</ion-button>
                  </div>
                </div>
              </div>
              <div class="body-modulo custom-box-overview">
                <div class="box-overview-component">
                  <ion-icon name="git-branch-outline"></ion-icon>
                  <span class="text-primary">TREE STRUCTURE</span>
                  <span class="text-secondary">{{node.rootLabel ? `Root Node:${node.rootLabel}`: `${node.label} es una
                    Categoria
                    Principal`}}
                  </span>
                  <span class="text-secondary">{{node.parentLabel ? `Parent Node: ${node.parentLabel}` :null}}
                  </span>
                  <ion-button class="bt-io size-s txt-sz-s custom-button-primary">See Tree</ion-button>
                </div>
                <div class="box-overview-component">
                  <ion-icon name="eye-outline"></ion-icon>
                  <span class="text-primary">STATUS</span>
                  <span class="text-main">{{
                    node.status === true ? "Activo" : "Unactive"
                    }}</span>
                  <span class="text-secondary">
                    Last Update :{{ node.metadata.lastUpdate.date }}
                  </span>
                </div>
              </div>
            </div>
            <!-- #endregion -->
          </ion-segment-content>
          <ion-segment-content id="info-content">
            <!-- #region - Metadata -->
            <div class="modulo">
              <div class="head-modulo">
                <app-head title="Información General" heading="3"></app-head>
              </div>
              <div class="body-modulo">
                <ion-list>
                  <ion-item>
                    <ion-icon aria-hidden="true" name="bookmarks-outline" slot="start"></ion-icon>
                    <ion-label>Category ID</ion-label>
                    <ion-label slot="end">{{ node._id }}</ion-label>
                  </ion-item>
                  <ion-item>
                    <ion-icon aria-hidden="true" name="cellular-outline" slot="start"></ion-icon>
                    <ion-label>Nivel</ion-label>
                    <ion-label slot="end">{{ node.level }}</ion-label>
                  </ion-item>
                  <ion-item>
                    <ion-icon aria-hidden="true" name="calendar-outline" slot="start"></ion-icon>
                    <ion-label>Create Date</ion-label>
                    <ion-label slot="end">{{
                      node.metadata.createDate.date
                      }}</ion-label>
                  </ion-item>
                  <ion-item>
                    <ion-icon aria-hidden="true" name="person-outline" slot="start"></ion-icon>
                    <ion-label>Created By</ion-label>
                    <ion-label slot="end">{{
                      node.metadata.createDate.user
                      }}</ion-label>
                  </ion-item>
                  <ion-item>
                    <ion-icon aria-hidden="true" name="eye-outline" slot="start"></ion-icon>
                    <ion-label>Status</ion-label>
                    <ion-label slot="end">{{ node.status }}</ion-label>
                  </ion-item>
                </ion-list>
              </div>
            </div>
            <!-- #endregion -->
          </ion-segment-content>
        </ion-segment-view>
      </div>
    </div>
  </div>

</div>